<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administrador</title>
    <link rel="stylesheet" href="proyecto.css">
</head>
<body>
    <header>
        <h1>Administrador</h1>
        <p>Gestion de turno y clientes - BELENZA</p>    
        <nav>
            <a href="index3.html">Historial de Turnos</a>
            <a href="#clientes">Clientes</a>
            <a href="#insumos">Insumos a reponer</a>
        </nav>
    </header>

    <div class="grid_container">
        <section id="Historial">
            <h2>Historial de turno</h2>
            <div id="listaTurnos">
                <p>No hay turnos registrados aun.</p>
            </div>
        </section>

        <section id="clientes">
            <h2>Informacion de clientes</h2>
            <div id="listaClientes">
                <p>No hay informacion registrada aun.</p>
            </div>
        </section>

        <section id="insumos">
            <h2>Insumos a reponer</h2>

            <form id="formInsumo">
                <input type="text" id="nombreInsumo" placeholder="Nombre del producto" required>
                <input type="number" id="cantidadInsumo" placeholder="Cantidad" required min="0">
                <button type="submit">Agregar insumo</button>
            </form>

            <div id="listaInsumos">
                <p>No hay insumos registrados a√∫n.</p>
            </div>
        </section>
    </div>

    <footer>
        <p>¬© 2025 BELENZA - Todos los derechos reservados</p>
    </footer>
<script>
    // Mostrar Turnos
    const Turnos = JSON.parse(localStorage.getItem("turnosBelenza")) || [];
    const contenedorTurnos = document.getElementById("listaTurnos");
    const contenedorClientes = document.getElementById("listaClientes");

    if (Turnos.length > 0) {
        contenedorTurnos.innerHTML = "";
        contenedorClientes.innerHTML = "";

        Turnos.forEach(turno => {
            const item = document.createElement("div");
            item.style.borderBottom = "1px solid #ccc";
            item.style.marginBottom = "10px";
            item.innerHTML = `
                <strong>Nombre:</strong> ${turno.nombre}<br>
                <strong>Tel√©fono:</strong> ${turno.telefono}<br>
                <strong>Servicio:</strong> ${turno.servicio}<br>
                <strong>Extra:</strong> ${turno.servicioExtra}<br>
                <strong>Fecha:</strong> ${turno.fecha}<br>
                <strong>Hora:</strong> ${turno.hora}<br>
                <strong>Alergias:</strong> ${turno.alergia || "No informado"}<br>
            `;
            contenedorTurnos.appendChild(item);

            const clienteItem = document.createElement("div");
            clienteItem.style.borderBottom = "1px dashed #aaa";
            clienteItem.style.marginBottom = "10px";
            clienteItem.textContent = `${turno.nombre} (${turno.telefono}) - ${turno.servicio} el ${turno.fecha} a las ${turno.hora}`;
            contenedorClientes.appendChild(clienteItem);
        });
    }

    // Insumos
    let insumos = JSON.parse(localStorage.getItem("insumosBelenza")) || [];
    const contenedorInsumos = document.getElementById("listaInsumos");
    const form = document.getElementById("formInsumo");
    const nombreInput = document.getElementById("nombreInsumo");
    const cantidadInput = document.getElementById("cantidadInsumo");

    function guardarInsumos() {
        localStorage.setItem("insumosBelenza", JSON.stringify(insumos));
    }

    function mostrarInsumos() {
        contenedorInsumos.innerHTML = "";
        if (insumos.length === 0) {
            contenedorInsumos.innerHTML = "<p>No hay insumos registrados a√∫n.</p>";
            return;
        }

        insumos.forEach((insumo, index) => {
            const div = document.createElement("div");
            div.style.marginBottom = "10px";
            let estado = insumo.cantidad <= 2
                ? "<span style='color:red'>‚ö† Reponer</span>"
                : "<span style='color:green'>‚úî Ok</span>";

            div.innerHTML = `
                <strong>Producto:</strong> ${insumo.nombre}<br>
                <strong>Cantidad actual:</strong> ${insumo.cantidad} unidades<br>
                <strong>Estado:</strong> ${estado}<br>
                <button onclick="eliminarInsumo(${index})">üóë Eliminar</button>
                <button onclick="editarInsumo(${index})">‚úè Editar cantidad</button>
            `;
            contenedorInsumos.appendChild(div);
        });
    }

    form.addEventListener("submit", function (e) {
        e.preventDefault();

        const nombre = nombreInput.value.trim();
        const cantidad = parseInt(cantidadInput.value);

        if (nombre && cantidad >= 0) {
            insumos.push({ nombre, cantidad });
            guardarInsumos();
            mostrarInsumos();

            nombreInput.value = "";
            cantidadInput.value = "";
        }
    });

    function eliminarInsumo(index) {
        if (confirm("¬øSeguro que quer√©s eliminar este insumo?")) {
            insumos.splice(index, 1);
            guardarInsumos();
            mostrarInsumos();
        }
    }

    function editarInsumo(index) {
        const nuevaCantidad = prompt(`Editar cantidad para "${insumos[index].nombre}"`, insumos[index].cantidad);
        const numero = parseInt(nuevaCantidad);

        if (!isNaN(numero) && numero >= 0) {
            insumos[index].cantidad = numero;
            guardarInsumos();
            mostrarInsumos();
        } else {
            alert("Cantidad inv√°lida.");
        }
    }

    // Mostrar al cargar
    mostrarInsumos();
    let turnos = JSON.parse(localStorage.getItem("turnosBelenza")) || [];
    turnos.push(nuevoTurno);
    localStorage.setItem("turnosBelenza", JSON.stringify(turnos));

</script>

</body>

</html>