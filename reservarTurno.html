<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reservar Turno - Belenza</title>
    <link rel="stylesheet" href="proyecto.css">
</head>
<body>
    <header>
        <h1>Belenza</h1>
        <p>Reserv√° tu turno con nosotras</p>
        <nav>
            <a href="index.html">Inicio</a>
            <a href="#formulario">Reservar Turnos</a>
            <a href="#contacto">Contacto</a>
        </nav>
    </header>

    <div class="grid_container">
        <section id="formulario">
            <h2>Formulario de Turno</h2>
            <form action="#" method="post">
                <label for="nombre">Nombre:</label><br> 
                <input type="text" id="nombre" name="nombre" required minlength="3" ><br><br>

                <label for="telefono">Numero de telefono:</label><br>
                <input type="tel" id="telefono" name="telefono" required minlength="10" maxlength="10"><br><br>

                <label for="servicio">Servicio:</label><br>
                <select id="servicio" name="servicio" >
                    <option value="SeleccionServis">Selecciona un servicio</option>
                    <option value="kapping">Kapping $11.500</option>
                    <option value="soft_gel">Soft Gel $14.000</option>
                    <option value="semipermanente">Semipermanente $9.000</option>
                    <option value="limpieza">Limpieza $7.000</option>

                    
                    
                </select><br><br>
                <label for="servicio">Servicios Extra:</label><br>

                <select id="servicioExtra" name="servicioExtra" required>
                    <option value="servis">Seleccion un Servicio extra</option>
                    <option value="servis">Servis $3.000</option>
                    <option value="servis">Servis $3.000 + dise√±o por u√±a $600</option>
                    <option value="dise√±o">Dise√±o por u√±a $600</option>
                    <option value="servis">Ninguno</option>
                </select><br><br>
                  <label for="cantidadDiseno">Cantidad de u√±as con dise√±o (solo si elegiste "Dise√±o por u√±a $600"):</label>
                <select id="cantidadDiseno">
                    <option value="0" selected>0</option>
                    <option value="1">1 u√±a</option>
                    <option value="2">2 u√±as</option>
                    <option value="3">3 u√±as</option>
                    <option value="4">4 u√±as</option>
                    <option value="5">5 u√±as</option>
                    <option value="6">6 u√±as</option>
                    <option value="7">7 u√±as</option>
                    <option value="8">8 u√±as</option>
                    <option value="9">9 u√±as</option>
                    <option value="10">10 u√±as</option>
                </select>

                <label for="color">Color:</label>
                <input type="text" id="color" placeholder="Ej: Rosa pastel" />

                <label for="fecha">Fecha:</label><br>
                <input type="date" id="fecha" name="fecha" required ><br><br>
                <small id="fecha-aviso" style="color:red;"></small>

                <label for="hora">Hora disponible: (ma√±ana de 8 A 10)y(tarde despues de 18hs)
                </label><br>
                <input type="time" id="hora" name="hora" list="horarios-validos" required><br><br>


           
                <input type="submit" value="Reservar Turno">
            </form>
            <p><strong>Se√±a obligatoria:</strong> $2.000</p>
            <p><em>La se√±a no es reembolsable. Se puede cancelar con 24 hs de anticipaci√≥n.</em></p>
        </section>


        <section id="contacto">
            <h2>Contacto</h2>
            <a href="https://www.tiktok.com/@belenzaofi">Instagram</a>
            <a href="https://web.whatsapp.com/">WhatsApp</a>
            <a href="https://www.instagram.com/belenza.oficial/">TikTok</a>
        </section>
    </div>

    <footer>
        <p>¬© 2025 BELENZA - Todos los derechos reservados</p>
    </footer>

    <script>
        
//Captura el evento "submit" del formulario 
document.querySelector("form").addEventListener("submit", function (e){

    e.preventDefault();

    const nombre = document.getElementById("nombre").value.trim();
    const telefono = document.getElementById("telefono").value.trim();
    const servicio = document.getElementById("servicio").value;
    const servicioExtra = document.getElementById("servicioExtra").value;
    const cantidadDiseno = parseInt(document.getElementById("cantidadDiseno").value);
    const color = document.getElementById("color").value.trim();
    const fechaStr = document.getElementById("fecha").value;
    const horaStr = document.getElementById("hora").value;

    let errores = [];

    if(nombre.length < 4){
        errores.push("El nombre debe tener al menos 4 letras");
    }

    if(!/^\d{10}$/.test(telefono)){
        errores.push("El n√∫mero debe tener 10 d√≠gitos");
    }

    const hoy = new Date().toISOString().split("T")[0];
    if(fechaStr < hoy){
        errores.push("La fecha no puede ser anterior a hoy");
    }

    if(!horaStr){
        errores.push("Debe ingresar una hora v√°lida");
    }

    const fecha = new Date(fechaStr);
    const [hora, minutos] = horaStr.split(":").map(Number);
    const dia = fecha.getDay();
    const diaHabil = dia >= 1 && dia <= 5;
    const turnoMa√±ana = hora >= 9 && hora < 11;
    const turnoTarde = hora >= 18;

    if(!diaHabil || (!turnoMa√±ana && !turnoTarde)){
        errores.push("Solo se atiende de lunes a viernes entre 9 a 11hs o despu√©s de las 18hs");
    }

    if(servicio === "SeleccionServis"){
        errores.push("Debe seleccionar un servicio");
    }

    if((servicioExtra === "dise√±o" || servicioExtra.includes("dise√±o")) && cantidadDiseno === 0){
        errores.push("Debe indicar cu√°ntas u√±as con dise√±o");
    }

    if(errores.length > 0){
        alert(errores.join("\n"));
        return;
    }

    const preciosServicios = {
        kapping : 11500,
        soft_gel : 14000,
        semipermanente : 9000,
        limpieza : 7000
    };

    const dise√±oPorU√±a = 600;

    let precioExtraBase = 0;
    let descripcionExtra = "";

    if (servicioExtra.includes("Servis $3.000 + dise√±o")) {
        precioExtraBase = 3000 + (cantidadDiseno * dise√±oPorU√±a);
        descripcionExtra = `Servis + dise√±o por ${cantidadDiseno} u√±a(s)`;
    } else if (servicioExtra === "dise√±o") {
        precioExtraBase = cantidadDiseno * dise√±oPorU√±a;
        descripcionExtra = `Dise√±o por ${cantidadDiseno} u√±a(s)`;
    } else if (servicioExtra === "servis") {
        precioExtraBase = 3000;
        descripcionExtra = "Servis";
    } else {
        descripcionExtra = "Ninguno";
    }

    const precioServicio = preciosServicios[servicio] || 0;
    const total = precioServicio + precioExtraBase;

    const fechaMostrar = fecha.toLocaleDateString('es-AR', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });

    const mensajeUsuario = 
`*¬°Hola! Quiero confirmar mi turno üíÖ‚ú®*

*Mis datos son:*

üì± *Tel√©fono:* ${telefono}  
üôã‚Äç‚ôÄÔ∏è *Nombre:* ${nombre}  
üíÖ *Servicio:* ${servicio} - $${precioServicio.toLocaleString()}  
‚ú® *Servicio Extra:* ${descripcionExtra} - $${precioExtraBase.toLocaleString()}  
üé® *Color:* ${color || "No especificado"}  
üìÜ *Fecha:* ${fechaMostrar}  
üïí *Hora:* ${horaStr}  

üíµ *Total a abonar el d√≠a del turno:* $${total.toLocaleString()}  
üîê *Se√±a obligatoria para confirmar turno:* $2.000  

*Datos para enviar la se√±a:*  
üè¶ Alias: *belenza.se√±as.mp*  
üì≤ Enviame el comprobante por ac√° para dejar confirmado tu turno ü§ç  

¬°Gracias por elegirnos! üíñ`;

    const nuevoTurno = {
        nombre,
        telefono,
        servicio,
        servicioExtra,
        color,
        fecha: fechaStr,
        hora: horaStr,
        total,
        alergia: prompt("¬øSos al√©rgica a alg√∫n producto? Si no, pon√© 'no'")
    };

    const turnosGuardados = JSON.parse(localStorage.getItem("turnosBelenza")) || [];
    turnosGuardados.push(nuevoTurno);
    localStorage.setItem("turnosBelenza", JSON.stringify(turnosGuardados));

    const mensajeCodificado = encodeURIComponent(mensajeUsuario);
    const numeroBelenza = "543515223831";
    const Url = `https://wa.me/${numeroBelenza}?text=${mensajeCodificado}`;

    window.open(Url, "_blank");
});
    </script>
</body>
</html>
